{include file="head-gaiban" /}
<script src="__HOME__/js/lk/user.js"></script>
<body class="login-body respass-body">
 <style type="text/css">
 #code{

 font-size:20px;
 font-family:Arial; 
 font-style:italic; 
 font-weight:bold; 
 border:0; 
 letter-spacing:2px; 
 color:blue; 
 }
 .container{
   padding:0;
 }
 body{
   background: #f5f5f5;
 }
 </style>
 <div class="container">
     <div class="login-top">
         <a href="javascript:history.go(-1);" class="login-top-img"><img src="__HOME__/img/ic_back.png" alt=""></a> <h1 style="height: 50px" class="sign-title"></h1>
     </div>

   <form class="form-signin" method="post" id="formid" >
         
        <div class="login-wrap">
            <!-- <input type="text" autofocus="" placeholder="手机号码" class="form-control username" name="username" > -->
          	<!-- <div style="position: relative;" id = "inputshow">
                <input type="text" autofocus="" placeholder="验证码" class="form-control" id = "input"/>
              	<input type = "button" class="form-control"  id="code" style="position: absolute; right: 25%;top: 0%;font-size: 14px;width: 25%;height: 100%;line-height: 270%;z-index: 999;background-color: #eaeaec;padding: 0px;" />  -->
               <!-- <input type = "button"  class="btn btn-primary"  value = "验证" id="check" style="position: absolute; right: 0%;top: 0%;font-size: 14px;width: 25%;height: 100%;line-height: 200%;z-index: 999;    background-color: #428bca;border-color: #357ebd;"> -->
              	<!-- <span class="code_btn ng-binding"  onclick ="return get_svg();" id="check" style="position: absolute; right: 1%;top: 0%;font-size: 14px;width: 25%;height: 100%;line-height: 270%;z-index: 999;">
                          获取验证码
                </span>
          	</div> -->
          
          
          	<!-- <div style="position: relative;display:none;" id = "inputhide">
                <input type="text" autofocus="" placeholder="短信验证码" class="form-control" name="phonecode" >
                <span class="code_btn ng-binding"   style="position: absolute; right: 1%;top: 0%;font-size: 14px;width: 25%;height: 100%;line-height: 270%;z-index: 999;text-align: center;">
                          
                </span>
            </div> -->
            <div class="respass-cz">
                <div class="respass-title clearfix"><div class="fk"></div>请输入当前密码</div>
                <div class="login-item">
                    <div class="phone-img"><img src="__HOME__/img/user.png" alt=""></div>
                    <div class="phone"> <input type="text" autofocus="" placeholder="请输入当前密码" class="form-control username" name="cur_pwd" >
                    </div>
                </div>
            </div>
            
            <div class="respass-cz" style="margin-top:30px;">
                <div class="respass-title"><div class="fk"></div>重设密码</div>
                <div class="login-item">
                    <div class="phone-img"><img src="__HOME__/img/paw.png" alt=""></div>
                    <div class="phone">  <input type="password" autofocus="" placeholder="请输入密码" class="form-control" name="upwd"> 
                    </div>
                </div>
                <div class="login-item">
                    <div class="phone-img"><img src="__HOME__/img/paw.png" alt=""></div>
                    <div class="phone"> <input type="password" autofocus="" placeholder="请确认密码" class="form-control"  name="upwd2">
                    </div>
                </div>
            </div>
           
            
       
			
            <!-- <div class="registration">
                <a href="javascript:history.go(-1);" class="">
                  ——&nbsp;&nbsp;返回&nbsp;&nbsp;——
                </a>
           </div> -->

        </div>
        <button  class="btn btn-lg btn-login btn-block respass-qr" onclick="return checkform(this.form);">
            确定
        </button>
    </form>

</div>
<script type="text/javascript">
  function change(){
    code=$("#code");
  // 验证码组成库
   var arrays=new Array( 
       '1','2','3','4','5','6','7','8','9','0',
       'a','b','c','d','e','f','g','h','i','j', 
       'k','l','m','n','o','p','q','r','s','t', 
       'u','v','w','x','y','z', 
       'A','B','C','D','E','F','G','H','I','J', 
       'K','L','M','N','O','P','Q','R','S','T', 
       'U','V','W','X','Y','Z'        
       ); 
    codes='';// 重新初始化验证码
   for(var i = 0; i<4; i++){
   // 随机获取一个数组的下标
   var r = parseInt(Math.random()*arrays.length);
   codes += arrays[r];
  }
  // 验证码添加到input里
     code.val(codes);
  }
  change();
 code.click(change);
 //单击验证
  $("#check").click(function(){
   var inputCode = $("#input").val().toUpperCase(); //取得输入的验证码并转化为大写 
   console.log(inputCode);
  if(inputCode.length == 0) { //若输入的验证码长度为0
   //alert("请输入验证码！"); //则弹出请输入验证码
   	layer.msg('请输入验证码');
		return false; 
  }    
  else if(inputCode!=codes.toUpperCase()) { //若输入的验证码与产生的验证码不一致时
   //alert("验证码输入错误!请重新输入"); //则弹出验证码输入错误
   layer.msg('验证码输入错误!请重新输入');
   change();//刷新验证码
   $("#input").val("");//清空文本框
  }else { //输入正确时
   //alert("正确"); //弹出^-^
    
    var inputnone =document.getElementById("inputshow");
    inputnone.style.display="none";
    var  inputblock=document.getElementById("inputhide");
    inputblock.style.display="block";
    
  } 
  });
</script> 
<script>
function checkform(form){
	var cur_pwd = form.cur_pwd.value;
	var upwd = form.upwd.value;
	var upwd2 = form.upwd2.value;
    if (!cur_pwd) {
        layer.msg('请输入原密码');
        return false;
    }

	if (!upwd) {
		layer.msg('请输入登录密码'); 
		return false;
	}

	if (!upwd2) {
		layer.msg('请再次输入登录密码'); 
		return false;
	}

	if(upwd.length < 6 || upwd2.length < 6){
		layer.msg('密码长度大于6位'); 
		return false;
	}

	if(upwd != upwd2){
		layer.msg('两次输入密码不同'); 
		return false;
	}
	var data = $('#formid').serialize();
    var formurl = "{:Url('login/respass')}";
    var locurl = "{:Url('index/user/index')}";
    WPpost(formurl,data,locurl);
    return false;
}
</script>


<script src="/static/gaiban/js/jquery-1.10.2.min.js"></script>
<script src="/static/gaiban/js/bootstrap.min.js"></script>
<script src="/static/gaiban/js/modernizr.min.js"></script>

</body>
</html>
